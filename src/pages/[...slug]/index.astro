---
import ProjectHomePage from "@components/ProjectHomePage.astro";
import SiteLayout from "@layouts/SiteLayout.astro";
import { listProjects, findProject } from "@lib/crds";

export async function getStaticPaths() {
  const projects = await listProjects();
  return projects.map((project) => ({
    params: {
      slug: project.slug,
    },
  }));
}

const { slug } = Astro.params;

const project = await findProject(slug);
const tag = project.versions[0];
---

<SiteLayout
  title={`${project.name} Spec ${tag}: Reference Guide and Documentation`}
  description={`Find the documentation for all ${project.name} custom resources, properties, types and even some examples!`}
>
  <ProjectHomePage project={project} tag={tag} />
</SiteLayout>
